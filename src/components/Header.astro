---
// import { Icon } from 'astro-icon/components';
---

<header class="fixed top-0 w-full z-50 transition-all duration-300">
  
  <nav class="thenav fixed container-max w-full m-0">

    <div id="header" class="internav fixed backdrop-blur-xs bg-white/[var(--bg-opacity)] [--bg-opacity:50%] backdrop-blur-md border-b border-black/5 overflow-visible z-[99999] header-animate w-full">

      <div class="flex flex-col items-center justify-between content-between grid-cols-[auto_1fr] m-auto gap-x-10 md:flex w-full">
        <div class="topheader flex justify-between bg-primary-700 w-full py-2 text-white text-sm">
          <div class="md:container-width flex justify-between w-full pr-2">
            <div class="flex">
              <a>Bienvenido a Girolan</a>
            </div>
            <div class="flex items-center gap-4">
              <a href="/clientes" class="hover:underline underline-offset-4" aria-label="Clientes">
                Clientes
              </a>
              <a href="/blog" class="hover:underline underline-offset-4" aria-label="Blog">
                Blog
              </a>
            </div>
          </div>
        </div>
        <!-- Desktop Navigation -->
        <div class="md:container-width hidden md:block w-full items-center py-5">
          <div class="flex items-center space-x-8 text-white justify-between w-full">
            
            <div class="flex-shrink-0">
              <a href="/" class="font-[Epilogue] font-bold text-2xl text-primary-700 flex w-max">
                <svg xmlns="http://www.w3.org/2000/svg" width="250" viewBox="0 0 717 74" fill="none">
                  <path d="M69.9783 37C69.9783 18.7866 55.2134 4.02174 37 4.02174C18.7866 4.02174 4.02174 18.7866 4.02174 37C4.02174 55.2134 18.7866 69.9783 37 69.9783C55.2134 69.9783 69.9783 55.2134 69.9783 37ZM74 37C74 57.4345 57.4345 74 37 74C16.5655 74 0 57.4345 0 37C0 16.5655 16.5655 0 37 0C57.4345 0 74 16.5655 74 37Z" fill="#16A34A"/>
                  <path d="M26.8733 9.8291C30.0424 8.48584 33.5011 8.01127 37 8.01127C50.5452 8.01127 61.9991 17.3095 65.1361 29.9941C61.6372 27.573 57.4626 26.2458 53.087 26.2458C46.0891 26.2458 39.5498 29.6965 35.6004 35.4556C35.4074 35.7291 35.2224 36.0187 35.0454 36.3002C35.0294 36.3163 35.0213 36.3324 35.0133 36.3404C31.7878 40.9332 26.5194 43.6841 20.9131 43.6841C20.8648 43.6841 20.8165 43.6841 20.7602 43.6841C12.3065 43.6117 6.64392 35.0374 9.47522 27.0663C11.5504 21.2348 16.272 14.3254 26.8652 9.8291H26.8733Z" fill="#DC2626"/>
                  <path d="M47.1107 64.1469C43.9415 65.4901 40.4828 65.9647 36.9839 65.9647C23.4387 65.9647 11.9848 56.6664 8.84783 43.9819C12.3467 46.403 16.5213 47.7301 20.897 47.7301C27.8948 47.7301 34.4341 44.2795 38.3835 38.5203C38.5765 38.2469 38.7615 37.9573 38.9385 37.6758C38.9546 37.6597 38.9626 37.6436 38.9707 37.6356C42.1961 33.0427 47.4646 30.2919 53.0709 30.2919C53.1191 30.2919 53.1674 30.2919 53.2237 30.2919C61.6774 30.3643 67.34 38.9386 64.5087 46.9097C62.4335 52.7412 57.712 59.6506 47.1187 64.1469H47.1107Z" fill="#2563EB"/>
                  <path d="M53.2237 30.2919C61.6774 30.3643 67.34 38.9386 64.5087 46.9097L64.3062 47.4597C62.1676 53.0787 57.5336 59.5781 47.6113 63.9347L47.1187 64.1469H47.1107C43.9415 65.4901 40.4828 65.9647 36.9839 65.9647L36.9843 61.9426C40.1408 61.9426 43.0229 61.5114 45.5415 60.4439L45.7787 60.3434C55.0933 56.3197 59.0075 50.3722 60.7196 45.5611C62.6502 40.1211 58.8333 34.538 53.4467 34.3199L53.1891 34.3136H53.0712C48.7822 34.3136 44.7386 36.4207 42.262 39.9472L42.2393 39.9794C42.0838 40.2247 41.8998 40.5081 41.6996 40.7939L41.7004 40.7947C37.0016 47.6467 29.2218 51.7515 20.8973 51.7516C19.4372 51.7516 17.9945 51.6264 16.5826 51.3832C21.1126 57.788 28.5817 61.9426 36.9843 61.9426L36.9839 65.9647L36.3504 65.9581C23.0827 65.6734 11.9358 56.4682 8.84783 43.9819C12.2374 46.3273 16.261 47.6458 20.4873 47.7259L20.897 47.7301C27.676 47.73 34.0248 44.4915 38.0054 39.0533L38.3835 38.5203C38.48 38.3837 38.5744 38.243 38.6668 38.1013L38.9385 37.6758C38.9546 37.6597 38.9626 37.6436 38.9707 37.6356C42.0953 33.1863 47.1375 30.4653 52.5465 30.2997L53.0709 30.2919H53.2237Z" fill="#DC2626"/>
                  <path d="M138.482 24.7017C138.389 23.4637 138.133 22.3775 137.713 21.4432C137.294 20.4855 136.7 19.6796 135.931 19.0256C135.163 18.3482 134.207 17.846 133.066 17.5189C131.948 17.1686 130.632 16.9934 129.117 16.9934C125.856 16.9934 122.886 17.7759 120.207 19.3409C117.528 20.9059 115.28 23.16 113.463 26.1032C111.669 29.0464 110.434 32.5969 109.759 36.7547C109.06 40.9593 109.002 44.5565 109.584 47.5464C110.166 50.5363 111.424 52.8254 113.358 54.4138C115.315 56.0022 117.959 56.7964 121.29 56.7964C124.272 56.7964 126.846 56.3643 129.012 55.5C131.179 54.6357 132.914 53.4094 134.219 51.821C135.524 50.2326 136.339 48.3639 136.665 46.215L140.02 46.5653H123.666L125.903 32.6903H157.631L156.024 42.6411C154.952 49.1815 152.646 54.7759 149.105 59.4242C145.587 64.0492 141.208 67.5997 135.966 70.0758C130.725 72.5284 124.971 73.7547 118.704 73.7547C111.762 73.7547 105.903 72.2715 101.128 69.3049C96.352 66.3384 92.9392 62.1105 90.8892 56.6212C88.8625 51.1319 88.4665 44.6032 89.7011 37.035C90.6795 31.102 92.45 25.8463 95.0125 21.268C97.5983 16.6897 100.755 12.8239 104.482 9.67045C108.209 6.49369 112.321 4.09943 116.817 2.48769C121.313 0.852589 125.972 0.0350389 130.795 0.0350389C135.011 0.0350389 138.843 0.642363 142.291 1.85701C145.739 3.0483 148.686 4.75347 151.132 6.97254C153.578 9.16825 155.406 11.7727 156.618 14.786C157.852 17.7992 158.353 21.1045 158.12 24.7017H138.482Z" fill="#2563EB"/>
                  <path d="M191.36 1.0161L179.48 72.7737H160.051L171.932 1.0161H191.36Z" fill="#2563EB"/>
                  <path d="M188.687 72.7737L200.568 1.0161H231.458C236.769 1.0161 241.254 1.98548 244.911 3.92424C248.569 5.86301 251.201 8.65436 252.808 12.2983C254.416 15.9422 254.8 20.3103 253.961 25.4025C253.123 30.5414 251.271 34.8744 248.405 38.4015C245.563 41.9053 241.941 44.5682 237.538 46.3902C233.158 48.1888 228.243 49.0881 222.792 49.0881H204.342L206.858 33.9517H221.394C223.677 33.9517 225.681 33.6714 227.404 33.1108C229.128 32.5268 230.526 31.6158 231.598 30.3778C232.669 29.1165 233.368 27.458 233.694 25.4025C234.02 23.3469 233.857 21.6768 233.205 20.392C232.553 19.084 231.47 18.1263 229.955 17.5189C228.441 16.8883 226.566 16.5729 224.329 16.5729H217.481L208.116 72.7737H188.687ZM236.07 39.8381L248.51 72.7737H227.404L215.384 39.8381H236.07Z" fill="#2563EB"/>
                  <path d="M330.435 38.1562C329.131 45.958 326.545 52.4984 322.678 57.7775C318.811 63.0565 314.117 67.0391 308.595 69.7254C303.074 72.4116 297.169 73.7547 290.879 73.7547C284.17 73.7547 278.346 72.2948 273.407 69.375C268.469 66.4552 264.87 62.1806 262.61 56.5511C260.35 50.9217 259.896 44.0426 261.247 35.9138C262.505 28.1121 265.068 21.5483 268.935 16.2225C272.802 10.8968 277.519 6.86743 283.087 4.13447C288.654 1.40152 294.606 0.0350389 300.943 0.0350389C307.605 0.0350389 313.394 1.50663 318.31 4.44981C323.248 7.39299 326.836 11.7027 329.072 17.3788C331.332 23.0549 331.786 29.9807 330.435 38.1562ZM310.867 35.9138C311.519 31.8027 311.566 28.3456 311.007 25.5426C310.447 22.7162 309.271 20.5906 307.477 19.1657C305.684 17.7175 303.272 16.9934 300.244 16.9934C296.796 16.9934 293.745 17.8343 291.089 19.5161C288.433 21.1979 286.232 23.6155 284.485 26.7689C282.737 29.9223 281.514 33.7181 280.815 38.1562C280.07 42.3141 280 45.7711 280.606 48.5275C281.235 51.2838 282.469 53.351 284.31 54.7292C286.173 56.1073 288.596 56.7964 291.578 56.7964C294.979 56.7964 297.984 55.9788 300.593 54.3437C303.226 52.7086 305.404 50.3377 307.128 47.2311C308.875 44.1244 310.121 40.352 310.867 35.9138Z" fill="#2563EB"/>
                  <path d="M333.694 72.7737L345.574 1.0161H365.003L355.778 57.0767H384.711L382.055 72.7737H333.694Z" fill="#DC2626"/>
                  <path d="M408.499 72.7737H387.533L423.035 1.0161H449.592L461.333 72.7737H440.367L433.378 20.7775H432.819L408.499 72.7737ZM409.337 44.4631H448.754L446.238 59.0388H406.821L409.337 44.4631Z" fill="#DC2626"/>
                  <path d="M542.026 1.0161L530.146 72.7737H513.932L494.363 35.0729H493.944L487.654 72.7737H468.226L480.107 1.0161H496.6L515.889 38.5767H516.448L522.598 1.0161H542.026Z" fill="#DC2626"/>
                  <path d="M611.529 19.3409C611.692 15.1364 610.446 11.8428 607.79 9.46023C605.157 7.07765 601.465 5.88637 596.713 5.88637C593.405 5.88637 590.376 6.47033 587.628 7.63826C584.902 8.78283 582.654 10.3595 580.883 12.3684C579.136 14.3772 578.053 16.6664 577.634 19.2358C577.331 21.1278 577.471 22.7863 578.053 24.2112C578.635 25.6127 579.532 26.8273 580.744 27.8551C581.955 28.8829 583.341 29.7588 584.902 30.483C586.486 31.2071 588.093 31.8144 589.724 32.3049L596.957 34.4773C599.101 35.108 601.232 35.9138 603.352 36.8949C605.472 37.8759 607.359 39.1023 609.013 40.5739C610.667 42.0455 611.89 43.8557 612.682 46.0047C613.497 48.1537 613.66 50.7232 613.171 53.7131C612.519 57.5906 610.958 61.0593 608.489 64.1193C606.043 67.1559 602.828 69.5619 598.844 71.3371C594.861 73.1124 590.26 74 585.042 74C580.173 74 576.073 73.1941 572.742 71.5824C569.41 69.9473 566.953 67.6932 565.369 64.8201C563.784 61.947 563.179 58.6184 563.552 54.8343H570.261C570.004 57.6607 570.529 60.0549 571.833 62.017C573.161 63.9792 575.048 65.4741 577.494 66.5019C579.963 67.5063 582.805 68.0085 586.02 68.0085C589.584 68.0085 592.857 67.4129 595.839 66.2216C598.821 65.0069 601.279 63.3251 603.212 61.1761C605.169 59.0038 606.381 56.4811 606.846 53.608C607.266 51.1787 606.975 49.1348 605.973 47.4763C604.994 45.8179 603.469 44.428 601.395 43.3068C599.345 42.1622 596.899 41.1578 594.057 40.2936L585.88 37.7708C580.546 36.1357 576.574 33.8349 573.965 30.8684C571.379 27.9018 570.459 24.1177 571.204 19.5161C571.856 15.6386 573.452 12.2399 575.991 9.32008C578.554 6.3769 581.734 4.08776 585.531 2.45266C589.328 0.817552 593.428 0 597.831 0C602.28 0 606.066 0.829229 609.188 2.48769C612.333 4.14615 614.662 6.43529 616.176 9.35511C617.714 12.2516 618.285 15.5802 617.889 19.3409H611.529Z" fill="#DC2626"/>
                  <path d="M630.084 73.2992C628.686 73.2992 627.51 72.8087 626.555 71.8277C625.623 70.8466 625.157 69.6553 625.157 68.2538C625.157 66.8523 625.669 65.6727 626.694 64.715C627.719 63.7573 628.919 63.2784 630.293 63.2784C631.668 63.2784 632.844 63.7689 633.823 64.75C634.801 65.7311 635.267 66.899 635.22 68.2538C635.197 69.1881 634.941 70.0407 634.452 70.8116C633.986 71.559 633.368 72.1663 632.6 72.6335C631.854 73.0773 631.016 73.2992 630.084 73.2992Z" fill="#DC2626"/>
                  <path d="M652.142 72.7737L664.023 1.0161H670.557L659.655 66.8873H693.759L692.781 72.7737H652.142Z" fill="#DC2626"/>
                  <path d="M711.86 73.2992C710.462 73.2992 709.286 72.8087 708.331 71.8277C707.399 70.8466 706.933 69.6553 706.933 68.2538C706.933 66.8523 707.446 65.6727 708.471 64.715C709.496 63.7573 710.695 63.2784 712.07 63.2784C713.444 63.2784 714.621 63.7689 715.599 64.75C716.578 65.7311 717.043 66.899 716.997 68.2538C716.974 69.1881 716.717 70.0407 716.228 70.8116C715.762 71.559 715.145 72.1663 714.376 72.6335C713.631 73.0773 712.792 73.2992 711.86 73.2992Z" fill="#DC2626"/>
                </svg>
              </a>
            </div>

            <div class="flex items-center gap-8 justify-center w-full">
              <a href="/aire-acondicionado" class="nav-link" aria-label="Aire Acondicionado">
                Aire acondicionado
              </a>
              <a href="/calefaccion" class="nav-link" aria-label="Calefacción">
                Calefacción
              </a>
              <a href="/ventilacion" class="nav-link" aria-label="Ventilación">
                Ventilación
              </a>
              <a href="/frio-industrial" class="nav-link" aria-label="Frío Industrial">
                Frío industrial
              </a>
              <a href="/proyectos" class="nav-link" aria-label="Proyectos">
                Proyectos
              </a>
            </div>

            <div>
              <a href="/contacto" class="bg-primary-600 py-3 px-5 rounded-full text-base font-normal hover:bg-primary-800 focus:ring-2 focus:ring-primary-500 focus:ring-opacity-50 focus:outline-none focus:ring-offset-2 focus:ring-offset-white" aria-label="Contacto">
                Contacto
              </a>
            </div>
          </div>
        </div>

        <!-- CTA Button -->
        <!-- <div class="hidden md:block transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 focus:ring-4">
          <a href="tel:+34123456789" class="btn-primary flex items-center justify-center gap-2 bg-transparent">
            <svg class="bg-primary-500 w-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg> Llamar ahora
          </a>
        </div> -->
        <!-- Mobile Header -->
        <div class="flex items-center justify-between w-full md:hidden pt-4 pb-3">
          <!-- Logo -->
          <a href="/" class="font-[Epilogue] font-bold text-2xl text-primary-700 flex w-max">Girolan SL</a>
        <!-- Mobile menu button -->
        <!-- <div class="md:hidden"> -->
          <button type="button" class="pb-2 mobile-menu-button text-primary-700 hover:text-primary-500 transition-colors" aria-label="Abrir menú de navegación">
            <!-- Ícono hamburguesa -->
            <svg class="icon-burger h-6 w-6 block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
            <!-- Ícono cruz -->
            <svg class="icon-close h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile Navigation -->
    <div class="mobile-menu hidden md:hidden w-full">
      <div class="flex flex-col gap-3 pt-20 pl-8 pr-4 pb-8 space-y-1 bg-black/[var(--bg-opacity)] [--bg-opacity:10%] backdrop-blur-md rounded-lg mt-2 w-full h-screen">
        <a href="/aire-acondicionado" class="mobile-nav-link">Aire acondicionado</a>
        <a href="/servicios" class="mobile-nav-link">Servicios</a>
        <a href="/sobre-nosotros" class="mobile-nav-link">Sobre nosotros</a>
        <a href="/ubicacion" class="mobile-nav-link">Ubicación</a>
        <a href="/contacto" class="mobile-nav-link">Contacto</a>
        <div class="pt-4">
          <a href="tel:+34123456789" class="btn-primary w-full text-center">
            Llamar ahora
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>

<style>
  #header.over-hero {
    --bg-opacity: 100%;
  }
  .lucide {
    width: 20px;
  }

  .nav-link {
    @apply text-neutral-900 hover:text-primary-500 flex items-center gap-2 px-1 py-2 text-base font-normal transition-colors relative;
  }
  
  .nav-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0;
    height: 2px;
    background: theme('colors.primary.500');
    transition: all 0.3s ease;
    transform: translateX(-50%);
  }
  
  .nav-link:hover::after {
    width: 100%;
  }

  @media (max-width: 767px) {
    .thenav {
      display: flex;
      justify-content: center;
      margin-top: 3%;
    }
    .internav {
      width: 95%;
      border-radius: 10px;
      border: none;
      padding: 0 1rem;
    }
    .topheader {
      display: none;
    }
  }
  .mobile-nav-link {
    @apply text-white hover:text-primary-500 block px-3 py-2 text-base font-medium transition-colors;
  }

  .mobile-menu {
    animation: slideDown 0.3s ease-out;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

<script>
  // Mobile menu toggle
  const mobileMenuButton = document.querySelector('.mobile-menu-button');
  const mobileMenu = document.querySelector('.mobile-menu');
  const iconBurger = document.querySelector('.icon-burger');
  const iconClose = document.querySelector('.icon-close');

  mobileMenuButton?.addEventListener('click', () => {
    // Alternar menú
    mobileMenu?.classList.toggle('hidden');

    // Alternar iconos
    iconBurger?.classList.toggle('hidden');
    iconClose?.classList.toggle('hidden');
  });

  // Header background on scroll
  // const header = document.getElementById('header');
  
  // window.addEventListener('scroll', () => {
  //   if (window.scrollY > 50) {
  //     header?.classList.add('bg-white/95');
  //     header?.classList.remove('bg-white/10');
  //   } else {
  //     header?.classList.remove('bg-white/95');
  //     header?.classList.add('bg-white/10');
  //   }
  // });

  // Close mobile menu when clicking outside
  // document.addEventListener('click', (e) => {
  //   if (!e.target.closest('nav')) {
  //     mobileMenu?.classList.add('hidden');
  //   }
  // });
  document.addEventListener('DOMContentLoaded', () => {
    const header = document.getElementById('header');
    const hero = document.getElementById('hero');

    if (header && hero) {
      const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            // Header está sobre el hero → fondo 100%
            header.classList.add('over-hero');
          } else {
            // Header ya no está sobre el hero → usar transparencia
            header.classList.remove('over-hero');
          }
        });
      }, {
        rootMargin: `-${header.offsetHeight}px 0px 0px 0px`,
        threshold: 0
      });

      observer.observe(hero);
    }
  });
</script>